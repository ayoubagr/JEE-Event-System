<!-- Loader simple -->
<div *ngIf="!event" style="text-align: center; margin-top: 100px;">
  <div style="border: 4px solid #f3f3f3; border-top: 4px solid #007bff; border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; margin: 0 auto 20px;"></div>
  <p>Chargement...</p>
</div>

<!-- Contenu principal avec alias "e" pour éviter event?.propriété -->
<div class="container" *ngIf="event as e">
  <h2>Réserver vos places</h2>
  <div class="card">
    <h3 style="color: #0056b3;">{{ e.nom }}</h3>
    <p>{{ e.lieu }}</p>
    <p>Prix unitaire : <strong>{{ e.prix }} DH</strong></p>
    <hr>
    <label>Nombre de tickets (Max 4) : </label>
    <input
      type="number"
      [(ngModel)]="quantity"
      (ngModelChange)="updateTotal()"
      min="1"
      max="4"
    >
    <h3 style="margin-top: 20px;">
      Total à payer : <span style="color: green;">{{ totalPrice }} DH</span>
    </h3>
    <button (click)="onConfirm()" [disabled]="submitting">
      {{ submitting ? 'En cours...' : 'Confirmer & Payer' }}
    </button>
  </div>
  <p style="margin-top: 20px;">
    <a routerLink="/" style="color: #666;">← Retour à la liste</a>
  </p>
</div>

<style>
  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
</style>
